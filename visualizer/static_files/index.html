
<head>
    <meta charset="utf-8" />
    

    <title>Teller Database Visualizer</title>
            
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    
	<script src="scripts/sigma.min.js"></script>
	<script src="scripts/plugins/sigma.parsers.json.min.js"></script>

	<script>
	var sig;
	function xhrRequest(meRequest){
		var xhr = sigma.utils.xhr();
		xhr.open('GET', url, true);
		xhr.onreadystatechange  = meRequest;
		xhr.send();
	}
	function patchNewData(nodes, edges){
		for (var i  = 0 ; i < nodes.length;i++){
			n = nodes[i];
			try{
				console.log(nodes[i]);
				sig.graph.addNode(n);
			}
			catch(exception){console.log("Failed to node at " +i);}
		}
		for (var i  = 0 ; i < edges.length;i++){
			n = edges[i];
			try{
				console.log(nodes[i]);
				sig.graph.addEdge(n);
			}
			catch(excep){console.log("Failed to edge at " +i);}
		}
		
		sig.refresh();
		sig.render();
	}
	function addInstancesSeparated(){
		var xhr = sigma.utils.xhr();
		xhr.open('GET', 'dataDummy00', true);
		
		xhr.onreadystatechange  = function(){
			if (xhr.readyState === 4) {
					graph = JSON.parse(xhr.responseText);
					patchNewData(graph.nodes,graph.edges);
				}
		};
		xhr.send();
	}
	function addInstancesOverlapping(){
		var xhr = sigma.utils.xhr();
		xhr.open('GET', 'dataDummy01', true);
		
		xhr.onreadystatechange  = function(){
			if (xhr.readyState === 4) {
					graph = JSON.parse(xhr.responseText);
					patchNewData(graph.nodes,graph.edges);
				}
		};
		xhr.send();
	}
	function addInstance_Dot() {
		var xhr = sigma.utils.xhr();
		console.log("instantiate" + graph);
	
		sig.graph.addNode({
					"id": "n3",
					"label": "I Am the dot but I don't really help you to improve this graph",
					"x": 0,
					"y": 0,
					"size": 3
					});
		sig.refresh();
		sig.render();
	};
	
	
		$(document).ready(function() {
			url='data.json';
			s = document.getElementById('container')
			sig ={container: document.getElementById('container'),settings: {defaultNodeColor: '#eb2148'} };
			//document.getElementById('container') = sig;
			var xhr = sigma.utils.xhr();

			if (!xhr)
			throw 'XMLHttpRequest not supported, cannot load the file.';

			xhr.open('GET', url, true);
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					graph = JSON.parse(xhr.responseText);
					sig.graph = graph;
					sig = new sigma(sig);
				}
			};
			xhr.send();
			//starting new here
			//xhr.open('GET', url, true);
			
			//xhr.send();
	
    }); //end of init
	</script>

  <style type="text/css">
    /* sigma.js context : */
    .sigma {
      margin-left:auto;
      margin-right:auto;
      position: relative;
      border-radius: 4px;
      -moz-border-radius: 4px;
      -webkit-border-radius: 4px;
      background: #222;
      width: 80%;
      height: 80%;
      top: 0;
      left: 0;
    }
  </style>

</head>

<body>
	<div id="container" style = ""> 
	<button onClick = "addInstancesSeparated()" type ="button">Separated</button>
	<button onClick = "addInstancesOverlapping()" type ="button">Overlapping</button>
	<button onClick = "addInstance_Dot()" type ="button">add Dot</button>
	</div>
    
   
</body>



